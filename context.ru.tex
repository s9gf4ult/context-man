\mainlanguage[ru]

\usemodule  [simplefonts][size=12pt]
\usemodule [vim]
\defineframedtext [CODEBLOCK][background=color,backgroundcolor=lightgray,width=\dimexpr(\textwidth-1cm),
                              frame=off,offset=2mm]
\defineframedtext [CODERESULT][width=\dimexpr(\textwidth-1cm),frame=off,offset=2mm]

\definevimtyping[TEX][syntax=context,before=\startCODEBLOCK,after=\stopCODEBLOCK]

\usemodule  [metafun]

\setmainfont[dejavusans][expansion=quality,protrusion=quality]
\setmonofont[monaco][expansion=quality,protrusion=quality]
%% \setupinterlinespace[1.15em]
\setupalign[width,stretch]
\setuppagenumbering[location={footer,right}, style=bold]
\setupwhitespace[small]
\setupindenting[medium, yes]

\setuplayout[topspace=0mm,backspace=2.5cm,header=1cm,
             footer=1.5cm,width=\dimexpr(\paperwidth-4cm),
             height=\dimexpr(\paperheight-1cm),margin=1.5cm]

\setuphead[title][align={nothyphenated,flushleft,stretch}]
\setuphead[subject][align={nothyphenated,flushleft}]

\definedescription[descr][indenting=1cm,indentnext=yes,location=right,
  width=\textwidth,distance=\dimexpr(1cm-\textwidth),align={width,stretch}]

\setupTABLE[loffset=1mm,roffset=1mm,align={flushleft,stretch,lohi}]

\definemakeup
  [titlepage]
  [align=center,footerstate=none]

\setupinteraction[state=start]

\def\c{ \hbox{\ConTeXt} }

\starttext



\title{Общие правила}

Весь текст в \c разбит на параграфы. Параграфы при верстке отделаются
одной (и более) пустой строкой.

\startdescr{code:} \hfill
\startTEX
Параграф один.

Параграф два.


Параграф три.
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\startCODERESULT
Параграф один.

Параграф два.


Параграф три.
\stopCODERESULT
\stopdescr



В примере выше три параграфа. \c игнорирует идущие подряд пустые строки, так
что, отбить расстояние энтерами как в верде не получиться. В данном случае
расстояние между параграфами после верстки будет одинаковое.

Также, в \c есть команды. Все команды начинаются с \tex{} (бэкслеш). Чтобы
напечатать сам бэкслеш нужно ввести команду ``\tex{tex}'' вот так

\startdescr{code:} \hfill
\startTEX
\tex{}
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\startCODERESULT
\tex{}
\stopCODERESULT
\stopdescr

Кроме бэкслеша есть и другие специальные символы. С бэкслеша начинаются команды,
а с \% начинаются коментарии. Все что идет после знака коментария
игонорируется \c. Чтобы напечатать знак \%, а не коментарий
нужно \quote{оквочить} символ \% бэкслешем.

\startdescr{code:} \hfill
\startTEX
% Все, что идет после знака коментария игнорируется.
% Этот текст не будет виден после компиляции
Около 95\% опрошенных считают, что небо синего цвета.
\% все, что идет после знака процента видно
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\startCODERESULT
% Все, что идет после знака коментария игнорируется.
% Этот текст не будет виден после компиляции
Около 95\% опрошенных считают, что небо синего цвета.
\% все, что идет после знака процента видно
\stopCODERESULT
\stopdescr

Кроме знака \% в \c есть и другие специальные символы.

\placetable[here]{Специальные символы}{
\bTABLE
\setupTABLE[column][3][width=4cm]
\bTR
\bTD Символ \eTD
\bTD Назначение \eTD
\bTD Как напечатать сам сивол \eTD
\eTR

\bTR
\bTD \% \eTD
\bTD Символ коментария. Все, что идет после него до конца строки игнорируется. \eTD
\bTD \tex{\%} \eTD
\eTR

\bTR
\bTD \tex{} \eTD
\bTD С этого символа начинаются команды \eTD
\bTD \tex{tex\{\}} \eTD
\eTR

\bTR
\bTD \$ \eTD
\bTD С этого символа начинаются математические формулы, им же и заканчиваются \eTD
\bTD \tex{\$} \eTD
\eTR

\bTR
\bTD \{ \} \eTD
\bTD Фигурные скобки используются для группирования текста и/или команд.
Также, в фигурных скобках передаются аргументы для команд. \eTD
\bTD \tex{\{} \tex{\}} \eTD
\eTR

\bTR
\bTD \# \eTD
\bTD Используется в формировании новых команд, обычно не нужен при простой верстке \eTD
\bTD \tex{\#} \eTD
\eTR

\eTABLE}

По сути, когда вы набираете \quote{\tex{%}} или \quote{\tex{$}} вы вызываете
специальную команду, которая вставляет соответствующий знак в текст. В этом
плане \quote{\tex{\%}} с точки зрения \c ничем не отличается
от \quote{\tex{placefigure}} или любой другой команды.

\subject{dimension}

В некоторых командах есть параметры, значение которых измеряется в
расстоянии. Типовыми параметрами
являются \quote{width}, \quote{heifht}, \quote{offset} и подобные. Например,
если мы хотим задать конкретную ширину картинки, мы используем
параметр \quote{width}

\startdescr{code:} \hfill
\startTEX
\externalfigure[example.jpg][width=2cm]
\externalfigure[example.jpg][width=1in]
\externalfigure[example.jpg][width=0.2\textwidth]
\externalfigure[example.jpg][width=\dimexpr(\textwidth-15cm)]
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\startCODERESULT
\externalfigure[example.jpg][width=2cm]
\externalfigure[example.jpg][width=1in]
\externalfigure[example.jpg][width=0.2\textwidth]
\externalfigure[example.jpg][width=\dimexpr(\textwidth-15cm)]
\stopCODERESULT
\stopdescr

В примере выше параметр \quote{width} задается в сантиметрах, дюймах, а
также, параметрически. \tex{textwidth} - это команда, возвращающая текущую
ширину текста.

В третьей строке ширина картинки задается как 0.2 от ширины текста. Если бы мы
хотели разместить картинку во всю ширину текста мы бы просто
написали \quote{width=\tex{textwidth}}

В четвертой строке используется команда \tex{dimexpr}, предназначенная для
вычисления выражений с размерами. Например, в \tex{dimexpr} можно сложить
сантиметры с дюймами, разделить ширину текста (или любое другое размерное
значение) на два и отнять один сантиметр.

Для указания едениц измерения используются постфиксы к цифрам

\placetable[here]{Еденицы измерения}{
\bTABLE
\bTR
\bTD Постфикс  \eTD
\bTD Назначение \eTD
\bTD Пример \eTD
\eTR

\bTR
\bTD mm \eTD
\bTD Миллиметры \eTD
\bTD 2mm \eTD
\eTR

\bTR
\bTD cm \eTD
\bTD Сантиметры \eTD
\bTD 5cm \eTD
\eTR

\bTR
\bTD em \eTD
\bTD Ширина буквы \quote{M} текущего шрифта \eTD
\bTD 1.2em \eTD
\eTR

\bTR
\bTD ex \eTD
\bTD Высота буквы \quote{x} текущего шрифта \eTD
\bTD 2ex \eTD
\eTR

\bTR
\bTD pt \eTD
\bTD Пункты. В пунктах измеряется высота шрифта. \eTD
\bTD 14pt \eTD
\eTR

\bTR
\bTD in \eTD
\bTD Дюймы \eTD
\bTD 3in \eTD
\eTR
\eTABLE}

Можно, например, задать расстояние так

\startTEX
\dimexpr(1in+2cm+1ex)
\stopTEX

Что будет означать один дюйм, два сантиметра, плюс высота символа \quote{x}
текущего шрифта.

\title{Справка по командам}

\subject{\tex{externalfigure}}

Позволяет втсавить картинку.

\startdescr{code:} \hfill
\startTEX
\externalfigure[example.jpg][width=5cm]
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\startCODERESULT
\externalfigure[example.jpg][width=5cm]
\stopCODERESULT
\stopdescr

\startTEX
\externalfigure[имя файла][параметры разделенные запятой]
\stopTEX

\placetable[here]{Параметры для \tex{placefigure}}{
\bTABLE

\bTR
\bTD width \eTD
\bTD Ширина картинки \eTD
\eTR

\bTR
\bTD height \eTD
\bTD Высота картинки \eTD
\eTR

\bTR
\bTD factor \eTD
\bTD обычно исползуют значение \quote{fit}.
factor=fit масштабирует картинку под размер контейнера в котором
она находится. Будь это ячейка таблицы, либо простой параграф. \eTD
\eTR

\eTABLE}

Более подробно в
\goto{документации}[url(http://wiki.contextgarden.net/Command/externalfigure)]

\subject{\tex{placefigure}}

\tex{placefigure} указывает, как расположить картинку в тексте, а также,
позволяет добавить подпись к картинке. Есть 3 варианта расположения картинки

\startitemize
\item слева - указываем параметр left
\item справа - параметр right
\item по центру - параметр here
\stopitemize

\startdescr{code:} \hfill
\startTEX
\placefigure[left]{Пример}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития. Разнообразный и богатый опыт постоянное
информационно-пропагандистское обеспечение нашей
деятельности обеспечивает широкому кругу
(специалистов) участие в формировании форм
развития.
\stopTEX
\stopdescr

\startdescr{result:} \hfill
\placefigure[left]{Пример}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития. Разнообразный и богатый опыт постоянное
информационно-пропагандистское обеспечение нашей
деятельности обеспечивает широкому кругу
(специалистов) участие в формировании форм
развития.
\stopdescr

Как можно заметить в примере выше, картинка расположена слева, при этом текст,
{\bf идущий после объявления \tex{placefigure}} обтекает картинку справа. Текст,
{\bf написанный до \tex{placefigure}} при верстке будет идти выше
картинки. Таким образом, можно управлять расположением картинки. \\
Еще пример:

\vbox{
\startdescr{code:} \hfill
\startTEX
Задача организации, в особенности же постоянный
количественный рост и сфера нашей активности в
значительной степени обуславливает создание модели
развития.

\placefigure[right]{Пример}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития. Разнообразный и богатый опыт постоянное
информационно-пропагандистское обеспечение нашей
деятельности обеспечивает широкому кругу
(специалистов) участие в формировании форм
развития.
\stopTEX
\stopdescr

\startdescr{result:} \hfill \\
Задача организации, в особенности же постоянный
количественный рост и сфера нашей активности в
значительной степени обуславливает создание модели
развития.

\placefigure[right]{Пример}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития. Разнообразный и богатый опыт постоянное
информационно-пропагандистское обеспечение нашей
деятельности обеспечивает широкому кругу
(специалистов) участие в формировании форм
развития.
\stopdescr
}

Картинка расположена ровно под первым параграфом. Зато второй параграф ровно
обтекает ее слева.

Можно отключить обтекание и расположить картинку по тексту вот так:

\startdescr{code:} \hfill
\startTEX
Задача организации, в особенности же постоянный
количественный рост и сфера нашей активности в
значительной степени обуславливает создание модели
развития.

\placefigure[here,none]{}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития.
\stopTEX
\stopdescr

\startdescr{result:} \hfill \\
Задача организации, в особенности же постоянный
количественный рост и сфера нашей активности в
значительной степени обуславливает создание модели
развития.

\placefigure[here,none]{}{
\externalfigure[example.jpg][width=5cm]
}

Равным образом консультация с широким активом
позволяет оценить значение форм
развития.
\stopdescr

Вы могли заметить, что использовался параметр \quote{none}. Если подпись к
картинке не нужна, то нужно указать этот параметр и оставить подпись к картинке
пустой.

Вызов \tex{placefigure} выглядит так:

\startTEX
\placefigure[params]{caption}{figure placing code}
\stopTEX

\quote{params} - разделенный запятыми список параметров.
При верствке потребуются всего несколько значений параметров.

\placetable[here]{Параметры для \tex{placefigure}}{
\bTABLE
\bTR
\bTD left \eTD
\bTD Разместить картинку слева, текст будет обтекать ее справа. \eTD
\eTR

\bTR
\bTD right \eTD
\bTD Разместить картинку справа \eTD
\eTR

\bTR
\bTD here \eTD
\bTD Разместить картинку ровно там, где указано. Обтекания текста не будет. \eTD
\eTR

\bTR
\bTD top \eTD
\bTD Разместить картинку в самом верху страницы, выдрав ее из текста.
Где бы картинка ни была расположена в тексте, она будет сверстана вверху
страницы.\eTD
\eTR

\bTR
\bTD bottom \eTD
\bTD Разместить картинку внизу страницы, выдрав ее из текста. \eTD
\eTR

\bTR
\bTD none \eTD
\bTD Не добавлять подпись к картинке. \eTD
\eTR

\eTABLE}

Дополнительная инфа в
\goto{документации}[url(http://wiki.contextgarden.net/Floating_Objects)]

\stoptext
